use std;

fn quickread()->i32{
	let ch:i32 = getch();
	let x:i32 = 0;
	let f:i32 = 0;
	while ((ch < 48) || (ch > 57)){
		if((ch == 45)){
			f = 1;
		} 
		ch = getch();
	}
	while ((ch >= 48) && (ch <=57)){
		x = x * 10 + ch - 48;
		ch = getch();
	}
	if ((f != 0)){
		ret 0-x;
	}else{
		ret x;
	}
}

let n:i32;
let m:i32;
let to: [i32; 5005];
let next: [i32; 5005];
let head: [i32; 1005];
let cnt:i32 = 0;
let vis: [i32; 1005];

fn addedge(from:i32, To:i32){
	to[cnt] = To;
	next[cnt] = head[from];
	head[from] = cnt;
	cnt = cnt + 1;
	to[cnt] = from;
	next[cnt] = head[To];
	head[To] = cnt;
	cnt = cnt + 1;
}

fn init(){
	let i:i32 = 0;
	while (i < 1005){
		head[i] = -1;
		i = i + 1;
	}
}

fn clear(){
	let i:i32 = 1;
	while (i <= n){
		vis[i] = 0;
		i = i + 1;
	}
}

fn same(x:i32, tar:i32)->i32{
	vis[x] = 1;
	if (x == tar){
		ret 1;
	}
	let i:i32 = head[x];
	while (i != -1){
		let y:i32 = to[i];
		if ((vis[y]==0) && (same(y,tar) != 0)){
			ret 1;
		}
		i = next[i];
	}
	ret 0;
}

fn main()->i32{
	timer_start(76);
	n = quickread(); m = quickread();
	init();
	let ch:i32 = 0;
	let x:i32 = 0;
	let y:i32 = 0;
	while (m != 0){
		ch = getch();
		while ((ch != 81) && (ch != 85)){
			ch = getch();
		}
		if (ch == 81){
			x = quickread(); y = quickread();
            clear();
			putint(same(x, y));
			putch(10);
		}else{
			x = quickread(); y = quickread();
			addedge(x, y);
		}
		m = m - 1;
	}
	timer_stop(98);
	ret 0;
}